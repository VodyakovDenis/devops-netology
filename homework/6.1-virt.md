# Домашнее задание к занятию 1. «Типы и структура СУБД»

## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определённых данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- электронные чеки в json-виде,
- склады и автомобильные дороги для логистической компании,
- генеалогические деревья,
- кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации,
- отношения клиент-покупка для интернет-магазина.

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

### Решение

**- электронные чеки в json-виде**  
Документо-ориентированный NoSQL, так как такие БД хранят данные как документы. (Например: MongoDB)

**- склады и автомобильные дороги для логистической компании**  
Графовые БД, так как в такой структуре можно задавать дополнительные атрибуты для выбора оптимального маршрута (Например: Neo4j)

**- генеалогические деревья**  
Иерархическая или Графовая БД. В БД данные должны быть представлены в виде древовидной структуры (родитель - потомок). 

**- кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации**  
Key-Value БД. Например, можно использовать Redis, так как у него есть поддержка TTL, или Memcached (Memcached - по ощющениям будет быстрее работать).

**- отношения клиент-покупка для интернет-магазина**  
Реляционные БД, т.к. они обеспечивают связанность данных между различными таблицами. (Например: MySQL, MSSQL) 

## Задача 2

Вы создали распределённое высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт — это отдельная реализация вашей системы и для каждого пункта нужно привести классификацию):

- данные записываются на все узлы с задержкой до часа (асинхронная запись);
- при сетевых сбоях система может разделиться на 2 раздельных кластера;
- система может не прислать корректный ответ или сбросить соединение.

Согласно PACELC-теореме как бы вы классифицировали эти реализации?

### Решение

**CAP-теорема**
- данные записываются на все узлы с задержкой до часа (асинхронная запись)  
CA - данные доступны и согласованы

- при сетевых сбоях система может разделиться на 2 раздельных кластера  
AP - данные доступны и устойчивы к разделению, но не согласованы в каждый момент времени

- система может не прислать корректный ответ или сбросить соединение  
CP - система в которой в случае сбоя запросы могут теряться.

**PACELC-теорема**
- данные записываются на все узлы с задержкой до часа (асинхронная запись)  
PC/EL - Данная архитектура при разделении стремится оставаться консистентной, а в случае без сетевых разделений, фокусируется на скорости ответа, отводя консистентность на второй план.

- при сетевых сбоях система может разделиться на 2 раздельных кластера  
PA/EL - Данные доступны, но не согласованы для всех узлов если они есть / консистентность данных здесь играет менее важную роль.

- система может не прислать корректный ответ или сбросить соединение  
PA/EC - Ставка делается на доступность, а при отсутствии распределения – на консистентность


## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

### Решение

Не могут,(из презентации в лекции: BASE — принцип, противопоставляющий себя ACID.)   
В основе BASE - доступность данных даже в ущерб согласованности.  
ACID же основывается на согласованности данных и надежности в случае сбоев.  


## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни,
- реакция на истечение таймаута.

Вы слышали о key-value-хранилище, которое имеет механизм Pub/Sub. 
Что это за система? Какие минусы выбора этой системы?

### Решение

Redis это key-value хранилище, имеет механизм Pub/Sub и TTL с возможностью реакции на его истечение.  
Минусы Redis:  
- Высокие требования к оперативной памяти сервера
- В случае отказа сервера, данные из оперативной памяти будут утеряны и сохранятся только данные с последней синхронизации
- Работает только на одном ядре процессора в однопоточном режиме
