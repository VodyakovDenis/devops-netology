
# Домашнее задание к занятию «Микросервисы: масштабирование»

Вы работаете в крупной компании, которая строит систему на основе микросервисной архитектуры.
Вам как DevOps-специалисту необходимо выдвинуть предложение по организации инфраструктуры для разработки и эксплуатации.

## Задача 1: Кластеризация

Предложите решение для обеспечения развёртывания, запуска и управления приложениями.
Решение может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.

Решение должно соответствовать следующим требованиям:
- поддержка контейнеров;
- обеспечивать обнаружение сервисов и маршрутизацию запросов;
- обеспечивать возможность горизонтального масштабирования;
- обеспечивать возможность автоматического масштабирования;
- обеспечивать явное разделение ресурсов, доступных извне и внутри системы;
- обеспечивать возможность конфигурировать приложения с помощью переменных среды, в том числе с возможностью безопасного хранения чувствительных данных таких как пароли, ключи доступа, ключи шифрования и т. п.

Обоснуйте свой выбор.

### Решение:
---

Для развертывания, запуска и управления приложениями в микросервисной архитектуре предлагаю рассмотреть Kubernetes вместе с Istio.   
Kubernetes обеспечивает оркестрацию контейнеров, а Istio улучшает управление взаимодействием служб, безопасностью и наблюдаемостью.   

**Компоненты решения:**

1. **Kubernetes:**
    - Управляет контейнерными приложениями с помощью декларативной конфигурации и автоматизации.
    - Обеспечивает горизонтальное масштабирование, последовательные обновления и возможности самовосстановления.
    - Позволяет определять ресурсы, такие как развертывания, службы и вход.   

2. **Istio:**
    - Обеспечивает обнаружение и маршрутизацию услуг через свою плоскость управления.
    - Повышает безопасность благодаря таким функциям, как взаимный TLS и политики авторизации.
    - Обеспечивает наблюдаемость посредством метрик, трассировки и регистрации.
    - Поддерживает маршрутизацию.

3. **Безопасность:**
    - Kubernetes предоставляет встроенные секретные объекты для хранения конфиденциальных данных, таких как пароли, ключи доступа и ключи шифрования.
    - Секреты надежно хранятся и могут быть смонтированы как переменные среды в модулях.


**Обоснование:**
- Kubernetes поддерживает контейнерные приложения, обеспечивая согласованное развертывание в различных средах.
- Istio упрощает обнаружение сервисов и интеллектуальную маршрутизацию.
- Kubernetes позволяет автоматически горизонтально масштабировать модули на основе определенных показателей.
- Горизонтальное автомасштабирование модулей Kubernetes автоматически регулирует количество модулей в зависимости от использования ресурсов.
- Сетевые политики Kubernetes допускают явное разделение ресурсов, как внешних, так и внутренних.
- Секреты Kubernetes обеспечивают безопасный способ управления конфиденциальными данными.
- Kubernetes и Istio — это стандартные инструменты управления микросервисами с активными сообществами и постоянным развитием.

**Рабочий процесс:**
1. Разработчики создают образы Docker для своих микросервисов.
2. Kubernetes управляет развертыванием приложений, используя определенные ресурсы.
3. Istio обеспечивает обнаружение, маршрутизацию и безопасность сервисов.
4. Переменные среды надежно хранятся в секретах Kubernetes и монтируются в подах.